{"version":3,"sources":["components/Login.jsx","components/Register.jsx","App.js","index.js"],"names":["Login","setShowLogin","setCurrentUsername","myStorage","useState","error","setError","usernameRef","useRef","passwordRef","handleSubmit","e","a","preventDefault","user","username","current","value","password","axios","post","res","data","setItem","className","Room","onSubmit","autoFocus","placeholder","ref","type","min","Cancel","onClick","Register","setShowRegister","success","setSuccess","emailRef","newUser","email","App","window","localStorage","getItem","currentUsername","width","height","longitude","latitude","zoom","viewState","setViewState","pins","setPins","currentPlaceId","setCurrentPlaceId","newPlace","setNewPlace","title","setTitle","desc","setDesc","star","setStar","showRegister","showLogin","useEffect","getPins","get","allPins","console","log","newPin","rating","lat","long","style","mapboxApiAccessToken","onMove","evt","onViewStateChange","mapStyle","onDblClick","lngLat","map","p","offsetLeft","offsetTop","fontSize","color","cursor","id","_id","closeButton","closeOnClick","onClose","anchor","Array","fill","Star","format","createdAt","onChange","target","removeItem","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bdc338c9.chunk.js","sourcesContent":["import { Cancel, Room } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { useRef, useState } from \"react\";\nimport \"./login.css\";\n\nexport default function Login({ setShowLogin, setCurrentUsername,myStorage }) {\n  const [error, setError] = useState(false);\n  const usernameRef = useRef();\n  const passwordRef = useRef();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const user = {\n      username: usernameRef.current.value,\n      password: passwordRef.current.value,\n    };\n    try {\n      const res = await axios.post(\"/users/login\", user);\n      setCurrentUsername(res.data.username);\n      myStorage.setItem('user', res.data.username);\n      setShowLogin(false)\n    } catch (err) {\n      setError(true);\n    }\n  };\n\n  return (\n    <div className=\"loginContainer\">\n      <div className=\"logo\">\n        <Room className=\"logoIcon\" />\n        <span>LamaPin</span>\n      </div>\n      <form onSubmit={handleSubmit}>\n        <input autoFocus placeholder=\"username\" ref={usernameRef} />\n        <input\n          type=\"password\"\n          min=\"6\"\n          placeholder=\"password\"\n          ref={passwordRef}\n        />\n        <button className=\"loginBtn\" type=\"submit\">\n          Login\n        </button>\n        {error && <span className=\"failure\">Something went wrong!</span>}\n      </form>\n      <Cancel className=\"loginCancel\" onClick={() => setShowLogin(false)} />\n    </div>\n  );\n}\n","import { Cancel, Room } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { useRef, useState } from \"react\";\nimport \"./register.css\";\n\nexport default function Register({ setShowRegister }) {\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(false);\n  const usernameRef = useRef();\n  const emailRef = useRef();\n  const passwordRef = useRef();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newUser = {\n      username: usernameRef.current.value,\n      email: emailRef.current.value,\n      password: passwordRef.current.value,\n    };\n\n    try {\n      await axios.post(\"/users/register\", newUser);\n      setError(false);\n      setSuccess(true);\n    } catch (err) {\n      setError(true);\n    }\n  };\n  return (\n    <div className=\"registerContainer\">\n      <div className=\"logo\">\n        <Room className=\"logoIcon\" />\n        <span>LamaPin</span>\n      </div>\n      <form onSubmit={handleSubmit}>\n        <input autoFocus placeholder=\"username\" ref={usernameRef} />\n        <input type=\"email\" placeholder=\"email\" ref={emailRef} />\n        <input\n          type=\"password\"\n          min=\"6\"\n          placeholder=\"password\"\n          ref={passwordRef}\n        />\n        <button className=\"registerBtn\" type=\"submit\">\n          Register\n        </button>\n        {success && (\n          <span className=\"success\">Successfull. You can login now!</span>\n        )}\n        {error && <span className=\"failure\">Something went wrong!</span>}\n      </form>\n      <Cancel\n        className=\"registerCancel\"\n        onClick={() => setShowRegister(false)}\n      />\n    </div>\n  );\n}\n","import * as React from 'react';\nimport Map,{Marker,Popup} from 'react-map-gl';\nimport {useState,useEffect} from 'react';\nimport axios from \"axios\";\nimport { Room, Star, StarBorder } from \"@material-ui/icons\";\nimport { format } from \"timeago.js\";\nimport \"./app.css\";\nimport Login from './components/Login';\nimport Register from './components/Register';\n\nfunction App() {\n  const myStorage = window.localStorage;\n  const [currentUsername, setCurrentUsername] = useState(myStorage.getItem(\"user\"));\n  const [viewState, setViewState] = useState({\n    width:\"100vw\",\n    height:\"100vh\",\n    longitude:76.271080,\n    latitude: 10.850516,\n    zoom: 4\n  });\n  const [pins, setPins] = useState([]);\n  const [currentPlaceId, setCurrentPlaceId] = useState(null);\n  const [newPlace, setNewPlace] = useState(null);\n  const [title, setTitle] = useState(null);\n  const [desc, setDesc] = useState(null);\n  const [star, setStar] = useState(0);\n  const [showRegister, setShowRegister] = useState(false);\n  const [showLogin, setShowLogin] = useState(false);\n\n  useEffect(() => {\n    const getPins = async () => {\n      try {\n        const allPins = await axios.get(\"/pins\");\n        setPins(allPins.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getPins();\n  }, []);\n\n   \n  const handleMarkerClick = (id, lat, long) => {\n    setCurrentPlaceId(id);\n    setViewState({ ...viewState, latitude: lat, longitude: long });\n   \n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newPin = {\n      username: currentUsername,\n      title,\n      desc,\n      rating: star,\n      lat: newPlace.lat,\n      long: newPlace.long,\n    };\n\n    try {\n      const res = await axios.post(\"/pins\", newPin);\n      setPins([...pins, res.data]);\n      setNewPlace(null);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleAddClick = (e) => {\n    const [longitude, latitude] = e.lngLat;\n    setNewPlace({\n      lat: latitude,\n      long: longitude,\n    });\n  };\n\n  const handleLogout = () => {\n    setCurrentUsername(null);\n    myStorage.removeItem(\"user\");\n  }\n\n  \n\n\n  return  <div style={{ height: \"100vh\", width: \"100%\" }}>\n  <Map\n    {...viewState}\n    mapboxApiAccessToken='pk.eyJ1Ijoibmluam9zIiwiYSI6ImNsMGZiOWMwaDByYTkza3BvMnh6dTF6eGQifQ.HMK45m0aBh37dDPH8_TU_Q'\n    onMove={evt => setViewState(evt.viewState)}\n    onViewStateChange={evt => setViewState(evt.viewState)}\n    // transitionDuration=\"200\"\n    mapStyle=\"mapbox://styles/safak/cknndpyfq268f17p53nmpwira\"\n    onDblClick={handleAddClick}\n  >\n     {pins.map((p) => (\n          <>\n              <Marker longitude={p.long} latitude={p.lat} offsetLeft={-3.5 * viewState.zoom}\n              offsetTop={-7 * viewState.zoom} >\n      {/* <img src=\"./pin.png\" /> */}\n      <Room\n                style={{\n                  fontSize: 7 * viewState.zoom,\n                  color:currentUsername === p.username ? \"tomato\" : \"slateblue\",\n                  cursor: \"pointer\",\n                }}\n                onClick={() => handleMarkerClick(p._id,p.lat, p.long)}\n               \n              />\n    </Marker>\n    {p._id === currentPlaceId &&(\n    <Popup longitude={p.long} latitude={p.lat} closeButton={true} closeOnClick={false}  onClose={() => setCurrentPlaceId(null)}\n        anchor=\"bottom\"\n        >\n            <div className=\"card\">\n                  <label>Place</label>\n                  <h4 className=\"place\">{p.title}</h4>\n                  <label>Review</label>\n                  <p className=\"desc\">{p.desc}</p>\n                  <label>Rating</label>\n                  <div className=\"stars\">\n                  {Array(p.rating).fill(<Star className=\"star\" />)}\n                  </div>\n                  <label>Information</label>\n                  <span className=\"username\">\n                    Created by <b>{p.username}</b>\n                  </span>\n                  <span className=\"date\">{format(p.createdAt)}</span>\n                </div>\n      </Popup>)}\n          </>\n        ))}\n        {newPlace && (\n          <Popup\n              latitude={newPlace.lat}\n              longitude={newPlace.long}\n              closeButton={true}\n              closeOnClick={false}\n              onClose={() => setNewPlace(null)}\n              anchor=\"left\"\n            >\n\n             <div>\n                <form onSubmit={handleSubmit}>\n                  <label>Title</label>\n                  <input\n                    placeholder=\"Enter a title\"\n                    autoFocus\n                    onChange={(e) => setTitle(e.target.value)}\n                  />\n                  <label>Description</label>\n                  <textarea\n                    placeholder=\"Say us something about this place.\"\n                    onChange={(e) => setDesc(e.target.value)}\n                  />\n                  <label>Rating</label>\n                  <select onChange={(e) => setStar(e.target.value)}>\n                    <option value=\"1\">1</option>\n                    <option value=\"2\">2</option>\n                    <option value=\"3\">3</option>\n                    <option value=\"4\">4</option>\n                    <option value=\"5\">5</option>\n                  </select>\n                  <button type=\"submit\" className=\"submitButton\">\n                    Add Pin\n                  </button>\n                </form>\n              </div>\n\n            \n          </Popup>)}\n\n          {currentUsername ? (\n          <button className=\"button logout\" onClick={handleLogout}>\n            Log out\n          </button>\n        ) : (\n          <div className=\"buttons\">\n            <button className=\"button login\" onClick={() => setShowLogin(true)}>\n              Log in\n            </button>\n            <button\n              className=\"button register\"\n              onClick={() => setShowRegister(true)}\n            >\n              Register\n            </button>\n          </div>\n        )}\n        {showRegister && <Register setShowRegister={setShowRegister} />}\n        {showLogin && (\n          <Login\n            setShowLogin={setShowLogin}\n            setCurrentUsername={setCurrentUsername}\n            myStorage={myStorage}\n          />\n        )}\n\n     \n  </Map>\n  </div>\n}\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}